<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jugar | R.A.L.S.M. Centro de Estudio</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-accent': '#059669', /* Verde Esmeralda Profundo (Color principal) */
                        'primary-light': '#34d399', /* Verde m√°s claro para hover y sombras */
                        'bg-light': '#fefefe',
                        'text-dark': '#1e293b',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <!-- Usamos la fuente Inter, ideal para un look moderno y legible -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght=100..900&display=swap" rel="stylesheet">
    <style>
        /* Estilos de Fondo y Base */
        body {
            background-color: #f7f9fc; /* Off-white muy sutil */
            color: #1e293b; 
            padding-bottom: 40px; 
        }
        
        /* Estilo base para todos los paneles (Apple look) */
        .panel-style {
            /* Esquinas grandes y suaves */
            border-radius: 2rem; 
            background-color: white;
            /* Sombra sutil pero prominente */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08), 0 5px 15px rgba(0, 0, 0, 0.05); 
            border: 1px solid #f3f4f6; /* Borde muy claro */
            transition: all 0.3s ease;
        }

        /* Estilo para la navegaci√≥n superior y botones de acci√≥n */
        .nav-button {
            transition: all 0.3s ease;
            border-radius: 9999px;
            padding: 10px 25px;
            font-weight: 600;
        }
        .nav-button:hover {
            background-color: #059669;
            color: white;
            box-shadow: 0 4px 10px rgba(5, 150, 105, 0.3);
        }

        /* Cursor de juego */
        #game-area {
            cursor: crosshair;
        }

        /* Estilo del target clicable */
        .target-panel {
            box-shadow: 0 0 10px rgba(5, 150, 105, 0.7); /* Efecto ne√≥n/glow verde */
        }

        /* Footer Est√°tico (Mismo estilo que index.html) */
        .static-footer-panel {
            width: 95%; 
            max-width: 800px;
            z-index: 10; 
            padding: 1rem 1.5rem;
            border-radius: 1.5rem; 
            background-color: white; 
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
    </style>
</head>
<body class="min-h-screen flex flex-col items-center pt-12 px-4 font-sans text-text-dark">

    <!-- PANEL DE NAVEGACI√ìN (HEADER) -->
    <header class="mb-12 z-10 w-full max-w-4xl p-6 panel-style text-center flex justify-between items-center flex-wrap gap-4">
        <h1 class="text-3xl font-extrabold tracking-tight">
            Tiempo de <span class="text-primary-accent">Diversi√≥n</span>
        </h1>
        <a href="index.html" class="nav-button border-2 border-primary-accent text-primary-accent">
            ‚Üê Volver a Inicio
        </a>
    </header>

    <!-- PANEL PRINCIPAL DEL JUEGO -->
    <main class="w-full max-w-4xl mb-20">

        <!-- PANEL DE INSTRUCCIONES / INICIO -->
        <div id="start-panel" class="p-10 panel-style z-10 text-center">
            <h2 class="text-4xl font-extrabold mb-4 text-primary-accent">Cazador de Paneles ‚ú®</h2>
            <p class="text-xl text-slate-700 mb-6">
                ¬°Demuestra tu velocidad! Tienes <strong class="font-bold">15 segundos</strong> para hacer clic en el panel verde que aparece aleatoriamente en la zona de juego. Cada clic suma un punto.
            </p>
            <button id="start-button" class="nav-button border-2 border-primary-accent bg-primary-accent text-white hover:text-primary-accent hover:bg-white" onclick="startGame()">
                ¬°Comenzar Juego!
            </button>
        </div>

        <!-- PANEL DE JUEGO (Oculto al inicio) -->
        <div id="game-panel" class="p-6 panel-style z-10 hidden mt-8">
            
            <!-- Scoreboard and Timer -->
            <div class="flex justify-between items-center mb-4 pb-4 border-b border-slate-200">
                <p class="text-xl font-medium">Puntaje: <span id="score-display" class="text-primary-accent font-bold">0</span></p>
                <p class="text-xl font-medium">Tiempo restante: <span id="timer-display" class="text-red-500 font-bold">15</span>s</p>
            </div>

            <!-- Game Area (Contenedor para el panel clicable) -->
            <div id="game-area" class="w-full h-[400px] relative overflow-hidden panel-style border-4 border-slate-100 bg-gray-50">
                <!-- El target aparecer√° aqu√≠ -->
            </div>

        </div>
        
        <!-- PANEL DE RESULTADOS (Oculto al inicio) -->
        <div id="result-panel" class="p-10 panel-style z-10 hidden mt-8 text-center">
            <h2 class="text-4xl font-extrabold mb-4 text-primary-accent">¬°Tiempo Agotado! ‚è±Ô∏è</h2>
            <p class="text-xl text-slate-700 mb-6">Tu puntuaci√≥n final de concentraci√≥n fue:</p>
            <p id="final-score" class="text-6xl font-black text-primary-accent mb-8">0 Clicks</p>
            
            <button class="nav-button border-2 border-primary-accent text-primary-accent" onclick="document.location.reload()">
                Volver a Jugar üîÑ
            </button>
        </div>

    </main>
    
    <!-- L√ìGICA DEL JUEGO EN JAVASCRIPT -->
    <script>
        const GAME_DURATION = 15; // 15 segundos de duraci√≥n del juego
        let score = 0;
        let timeLeft = GAME_DURATION;
        let gameTimer;
        let spawnTimer;
        let isGameRunning = false;

        // Elementos del DOM
        const startPanel = document.getElementById('start-panel');
        const gamePanel = document.getElementById('game-panel');
        const resultPanel = document.getElementById('result-panel');
        const scoreDisplay = document.getElementById('score-display');
        const timerDisplay = document.getElementById('timer-display');
        const gameArea = document.getElementById('game-area');
        const finalScore = document.getElementById('final-score');

        // Funci√≥n para iniciar el juego
        function startGame() {
            score = 0;
            timeLeft = GAME_DURATION;
            isGameRunning = true;
            
            startPanel.classList.add('hidden');
            gamePanel.classList.remove('hidden');
            resultPanel.classList.add('hidden');
            scoreDisplay.textContent = score;
            timerDisplay.textContent = timeLeft;

            gameArea.innerHTML = ''; // Limpiar targets anteriores

            // Iniciar el temporizador principal del juego
            gameTimer = setInterval(updateTimer, 1000);
            
            // Iniciar la aparici√≥n del primer target
            spawnTimer = setTimeout(spawnTarget, 500); 
        }

        // Funci√≥n para actualizar el temporizador
        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = timeLeft;

            if (timeLeft <= 0) {
                endGame();
            }
        }

        // Funci√≥n para terminar el juego
        function endGame() {
            clearInterval(gameTimer);
            clearTimeout(spawnTimer);
            isGameRunning = false;
            
            // Asegurarse de remover cualquier target restante
            gameArea.innerHTML = ''; 

            gamePanel.classList.add('hidden');
            resultPanel.classList.remove('hidden');
            finalScore.textContent = `${score} Clicks`;
        }
        
        // Funci√≥n para generar un n√∫mero aleatorio entre min y max (inclusive)
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Funci√≥n para generar el target (panel clicable)
        function spawnTarget() {
            if (!isGameRunning) return;

            // 1. Remover target anterior si existe (asegura que solo haya uno a la vez)
            gameArea.innerHTML = '';

            // 2. Crear el nuevo target
            const target = document.createElement('div');
            target.classList.add('absolute', 'w-12', 'h-12', 'rounded-full', 'bg-primary-accent', 'cursor-pointer', 'transition-transform', 'duration-100', 'hover:scale-110', 'shadow-lg', 'target-panel');
            
            // 3. Obtener dimensiones del √°rea de juego
            const targetSize = 48; // w-12/h-12 = 3rem * 16px = 48px
            const areaWidth = gameArea.clientWidth - targetSize; 
            const areaHeight = gameArea.clientHeight - targetSize;

            // 4. Posicionamiento aleatorio
            const randomX = getRandomInt(0, areaWidth);
            const randomY = getRandomInt(0, areaHeight);
            
            target.style.left = `${randomX}px`;
            target.style.top = `${randomY}px`;
            
            // 5. Manejador de clic
            target.addEventListener('click', hitTarget);
            
            // 6. A√±adir al √°rea de juego
            gameArea.appendChild(target);

            // 7. Programar el siguiente target (aparece entre 0.4s y 0.8s)
            const nextSpawnTime = getRandomInt(400, 800);
            spawnTimer = setTimeout(spawnTarget, nextSpawnTime);
        }

        // Funci√≥n al hacer clic en el target
        function hitTarget(event) {
            if (!isGameRunning) return;
            
            score++;
            scoreDisplay.textContent = score;

            // Eliminar el target actual
            event.target.removeEventListener('click', hitTarget);
            event.target.remove(); 
            
            // Generar el siguiente target con un peque√±o retraso
            clearTimeout(spawnTimer);
            spawnTimer = setTimeout(spawnTarget, 100); 
        }

        // Mostrar el panel de inicio al cargar
        window.onload = () => {
             startPanel.classList.remove('hidden');
             gamePanel.classList.add('hidden');
             resultPanel.classList.add('hidden');
        };

    </script>
    
    <!-- FOOTER EST√ÅTICO COMO PANEL (Se mantiene el mismo estilo) -->
    <footer class="static-footer-panel mt-16 mx-auto py-4 text-slate-500">
        <div class="max-w-5xl mx-auto text-center text-sm px-4 flex flex-col items-center">
            <!-- Mensaje central -->
            <p class="mb-2 text-slate-600 font-medium">
                Centro de Estudio <span class="text-primary-accent font-bold">R.A.L.S.M.</span> ‚Äî Creada por <span class="font-bold">Abel Ghanam de 5to Amabilidad</span> para facilitar el aprendizaje.
            </p>
            <!-- Enlaces separados con l√≠nea divisoria sutil -->
            <div class="space-x-4 mt-1 pt-1 border-t border-slate-100 w-full max-w-sm">
                <a href="politica.html" class="hover:text-primary-accent transition duration-200 font-medium">Pol√≠tica de Privacidad</a>
                <span class="text-slate-300">|</span>
                <a href="contacto.html" class="hover:text-primary-accent transition duration-200 font-medium">Contacto Directo</a>
            </div>
        </div>
    </footer>

</body>
</html>
